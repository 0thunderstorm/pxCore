#!/bin/bash
BASE_DIR=/Applications/Pxscene.app
LOG_DIR=/var/tmp/pxscene
LOG_FILE=${LOG_DIR}/installer.out
PX=`ps -Al | grep load.sh | grep -v grep`
test -d "${LOG_DIR}" || mkdir "${LOG_DIR}"
while [ -n "${PX}" ]; do
   printf "Will not update while ${PX} is running...sleeping for 60.\n" >> ${LOG_FILE} 2>&1
   sleep 5
   PX=`ps -Al | grep load.sh | grep -v grep`
done
#do install
printf "Installing new version...\n" >> ${LOG_FILE} 2>&1
printf "  Copying $1/Pxscene.app to /Applications...\n" >> ${LOG_FILE} 2>&1
cp -R "$1/Pxscene.app" /Applications/ >> ${LOG_FILE} 2>&1
printf "install complete.\n" >> ${LOG_FILE} 2>&1
